/* Kill switch for any remaining gamification elements */
.xp-badge, 
.xp-chip, 
.ribbon, 
.confetti-root, 
.celebration-banner, 
.sticky-reward-bar,
.canadian-celebration,
.checkout-banner { 
  display: none !important; 
}

/* Premium motor card styles */
.motor-card, 
.motor-card-premium { 
  border-radius: 16px; 
  box-shadow: 0 6px 20px rgba(15,23,42,0.06); 
  border: 1px solid rgba(148,163,184,.35);
  padding: 12px;
}

.motor-card-premium:hover { 
  transition: transform .18s ease; 
}

.msrp { 
  text-decoration: line-through; 
  color: hsl(var(--muted-foreground)); 
}

.filter-chip { 
  border-radius: 999px; 
  padding: 6px 10px; 
}

/* Hide celebration particles and sticky elements */
.fixed.pointer-events-none.z-30,
.fixed.bottom-0.z-50,
.fixed.top-4.right-4.z-40 {
  display: none !important;
}

/* Force remove transforms from all cards to fix modal stacking */
.motor-card, [class*="motor-card"] {
  transform: none !important;
  filter: none !important;
}

/* Ensure modal is truly on top */
body > div[role="dialog"],
body > .modal-portal {
  z-index: 2147483647 !important; /* Maximum z-index */
  position: fixed !important;
}

/* Fix modal navigation overlay issues */
.modal-content {
  position: relative;
  /* Mobile: hide scrollbar completely */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}

/* Mobile: hide webkit scrollbar */
@media (max-width: 767px) {
  .modal-content::-webkit-scrollbar {
    display: none; /* Chrome/Safari */
  }
}

/* Ensure proper spacing between sticky nav and content */
@media (max-width: 768px) {
  .modal-content {
    scroll-padding-top: 80px; /* Account for sticky navigation height */
  }
}

/* Ensure navigation has solid background and proper stacking */
.modal-navigation {
  background: inherit;
}

.modal-navigation .flex {
  background: inherit;
}

/* Hide scrollbar for navigation tabs */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for all browsers - Modal content already defined above */

/* Modern thin scrollbar for desktop only */
@media (min-width: 768px) {
  .modal-content::-webkit-scrollbar {
    width: 4px;
    display: block;
  }
  .modal-content::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 2px;
  }
  .modal-content::-webkit-scrollbar-track {
    background: transparent;
  }
}

/* Dark mode scrollbar */
@media (min-width: 768px) {
  .dark .modal-content::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
  }
}

/* ========================================
   PREMIUM MICRO-ANIMATION UTILITIES
   ======================================== */

/* Premium hover glow effect */
.premium-glow-hover {
  transition: box-shadow 0.4s ease-out, transform 0.3s ease-out;
}
.premium-glow-hover:hover {
  box-shadow: 0 0 30px rgba(0, 82, 204, 0.12), 0 10px 40px -10px rgba(0, 0, 0, 0.1);
}

/* Subtle breathing pulse for CTAs - draws attention */
.premium-pulse {
  animation: premium-pulse 3s ease-in-out infinite;
}
@keyframes premium-pulse {
  0%, 100% { 
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
  }
  50% { 
    box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.04);
  }
}

/* Premium focus ring */
.premium-focus-ring:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px white, 0 0 0 4px rgba(0, 82, 204, 0.25);
}

/* Shimmer loading animation */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.animate-shimmer {
  background: linear-gradient(90deg, #f3f4f6 25%, #e5e7eb 50%, #f3f4f6 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Smooth card entrance with scale */
@keyframes card-entrance {
  from {
    opacity: 0;
    transform: translateY(12px) scale(0.97);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
.animate-card-entrance {
  animation: card-entrance 0.5s cubic-bezier(0.25, 0.1, 0.25, 1) forwards;
}

/* Tab content fade transition */
@keyframes tab-fade-in {
  from {
    opacity: 0;
    transform: translateX(8px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}
.animate-tab-content {
  animation: tab-fade-in 0.3s ease-out forwards;
}

/* Spec row stagger animation */
@keyframes spec-row-reveal {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.spec-row-animate {
  animation: spec-row-reveal 0.4s ease-out forwards;
}

/* Premium button hover scale */
.premium-btn-hover {
  transition: transform 0.2s ease-out, box-shadow 0.3s ease-out;
}
.premium-btn-hover:hover {
  transform: scale(1.02);
}
.premium-btn-hover:active {
  transform: scale(0.98);
}

/* Image crossfade transition */
.image-crossfade {
  transition: opacity 0.4s ease-out;
}

/* Stagger delay utilities for spec rows */
.stagger-1 { animation-delay: 0.05s; }
.stagger-2 { animation-delay: 0.1s; }
.stagger-3 { animation-delay: 0.15s; }
.stagger-4 { animation-delay: 0.2s; }
.stagger-5 { animation-delay: 0.25s; }
.stagger-6 { animation-delay: 0.3s; }
.stagger-7 { animation-delay: 0.35s; }
.stagger-8 { animation-delay: 0.4s; }

/* Checkmark pop animation for completed steps */
@keyframes check-pop {
  0% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); opacity: 1; }
}
.animate-check-pop {
  animation: check-pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Progress bar shimmer effect */
.progress-shimmer {
  position: relative;
  overflow: hidden;
}
.progress-shimmer::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
  animation: shimmer 2s infinite;
}

/* Premium card lift effect */
.premium-lift {
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease-out;
}
.premium-lift:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 32px -8px rgba(0, 0, 0, 0.12);
}

/* Selected state glow */
.premium-selected {
  box-shadow: 0 0 0 2px hsl(var(--primary)), 0 8px 24px -8px rgba(0, 82, 204, 0.2);
}

/* Line item reveal animation */
@keyframes line-item-reveal {
  from {
    opacity: 0;
    transform: translateX(-8px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}
.animate-line-item {
  animation: line-item-reveal 0.3s ease-out forwards;
}

/* ========================================
   GLASSMORPHISM UTILITIES
   ======================================== */

/* Premium frosted glass effect */
.glass-card {
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.8),
    0 0 0 1px rgba(255, 255, 255, 0.4);
}

.dark .glass-card {
  background: rgba(30, 41, 59, 0.7);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

/* Glass card with primary tint */
.glass-card-primary {
  background: linear-gradient(
    135deg,
    rgba(59, 130, 246, 0.1) 0%,
    rgba(255, 255, 255, 0.7) 50%,
    rgba(59, 130, 246, 0.05) 100%
  );
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(59, 130, 246, 0.2);
  box-shadow: 
    0 8px 32px rgba(59, 130, 246, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

.dark .glass-card-primary {
  background: linear-gradient(
    135deg,
    rgba(59, 130, 246, 0.15) 0%,
    rgba(30, 41, 59, 0.7) 50%,
    rgba(59, 130, 246, 0.1) 100%
  );
  border: 1px solid rgba(59, 130, 246, 0.3);
}

/* Glass overlay for modals/sheets */
.glass-overlay {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.dark .glass-overlay {
  background: rgba(15, 23, 42, 0.85);
}

/* Subtle glass for secondary elements */
.glass-subtle {
  background: rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark .glass-subtle {
  background: rgba(30, 41, 59, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.05);
}

/* Glass button effect */
.glass-button {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  transition: all 0.2s ease-out;
}

.glass-button:hover {
  background: rgba(255, 255, 255, 0.95);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
  transform: translateY(-1px);
}

.dark .glass-button {
  background: rgba(51, 65, 85, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.dark .glass-button:hover {
  background: rgba(71, 85, 105, 0.9);
}

/* Cinematic reveal styles */
.cinematic-spotlight {
  background: radial-gradient(
    ellipse 80% 50% at 50% 40%,
    rgba(59, 130, 246, 0.2) 0%,
    transparent 50%
  );
}

/* Price counter glow */
.price-glow {
  text-shadow: 0 0 40px rgba(59, 130, 246, 0.3);
}

/* Animated gradient border */
@keyframes gradient-border {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.gradient-border {
  position: relative;
  background: linear-gradient(white, white) padding-box,
              linear-gradient(135deg, #3b82f6, #8b5cf6, #ec4899, #3b82f6) border-box;
  background-size: 100% 100%, 300% 300%;
  border: 2px solid transparent;
  animation: gradient-border 4s ease infinite;
}

.dark .gradient-border {
  background: linear-gradient(hsl(var(--card)), hsl(var(--card))) padding-box,
              linear-gradient(135deg, #3b82f6, #8b5cf6, #ec4899, #3b82f6) border-box;
}